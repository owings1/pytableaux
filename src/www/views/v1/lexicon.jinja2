<div id="lexicons-heading"
    class="collapser-heading {{- helper.collapsed_if(is_proof) }}"
    data-target="#lexicons-content">Lexicon</div>
<div id="lexicons-content"
    class="lexicons collapser-contents {{- helper.collapsed_if(is_proof) }} {{- helper.hidden_if(is_proof) }}">
    <div class="input select">
        <label for="input_notation">Notation</label>
        <select id="input_notation" name="input_notation">
            {% for notn in parser_tables -%}
                <option value="{{ notn|e }}" {{ helper.select_opt(form_data, 'input_notation', notn, form_defaults) }}>
                    {{- notn -}}
                </option>
            {% endfor %}
        </select>
    </div>
    <div class="lexicon-panel">
        {%- for notn, table in parser_tables.items() -%}
            <div class="lexicon hidden notation-{{ notn|e }}">
                <span class="label">Atomics</span>
                <ul class="item-symbols">
                    {% for char in table.chars('atomic') -%}
                        <li>{{ char|e }}</li>
                    {% endfor %}
                </ul>
                <span class="label">Operators</span>
                <dl class="operator-symbols">
                    {% for operator in operators_list -%}
                        <dt>{{ table.char('operator', operator)|e }}</dt>
                        <dd>{{ operator|e }}</dd>
                    {% endfor %}
                </dl>
                <span class="label">Quantifiers</span>
                <dl class="operator-symbols">
                    {% for quantifier in quantifiers -%}
                        <dt>{{ table.char('quantifier', quantifier)|e }}</dt>
                        <dd>{{ quantifier|e }}</dd>
                    {% endfor %}
                </dl>
                <div class="clear"></div>
            </div>
        {% endfor %}
    </div>
    <div class="lexicon-panel last">
        {%- for notn, table in parser_tables.items() -%}
            <div class="lexicon hidden notation-{{ notn|e }}">
                <span class="label">Constants</span>
                <ul class="item-symbols">
                    {% for char in table.chars('constant') -%}
                        <li>{{ char|e }}</li>
                    {% endfor %}
                </ul>
                <span class="label">Variables</span>
                <ul class="item-symbols">
                    {% for char in table.chars('variable') -%}
                        <li>{{ char|e }}</li>
                    {% endfor %}
                </ul>
                <div class="clear"></div>
            </div>
        {% endfor %}
        <span class="label">Predicates</span>
        <div class="predicates">
            <table class="predicates">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>Name</th>
                        <th>Arity</th>
                    </tr>
                </thead>
                <tbody>
                    {% for name, predicate in system_predicates.items() -%}
                        <tr class="systemPredicate">
                            <td>
                                {% for notn, table in parser_tables.items() %}
                                    {%- set symbol = table.char('system_predicate', predicate) -%}
                                    {%- set subscript = predicate.subscript -%}
                                    <span class="predicateSymbol notation-{{ notn|e }} hidden">
                                        {{- symbol|e }}{% if subscript > 0 %}<span class="subscript">{{ subscript|e }}</span>{% endif -%}
                                    </span>
                                {% endfor %}
                            </td>
                            <td>{{ name|e }}</td>
                            <td>{{ predicate.arity }}</td>
                        </tr>
                    {% endfor %}
                    {% for label in form_data['user_predicate_symbols[]'] %}
                        {%- set index, subscript = label.split('.')|map('int') -%}
                        {%- set name = form_data['user_predicate_names[]'][loop.index0] -%}
                        {%- set arity = form_data['user_predicate_arities[]'][loop.index0] -%}
                        {%- call helper.predicate_row(index, subscript, name, arity) %}
                            {% for notn, table in parser_tables.items() -%}
                                {{- helper.predicate_symbol(notn, table.char('user_predicate', index), subscript) }}
                            {% endfor -%}
                        {%- endcall -%}
                    {%- endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="clear"></div>
</div>