{%- extends 'layout.jinja2' -%}
{%- import 'v2/helper.jinja2' as helper -%}
{%- block inline_css -%}
    {% if is_proof and resp_data %}
        {{ resp_data.attachments.get('css') }}
    {% endif %}
{%- endblock %}
{%- block content -%}
    <script type="text/template" id="premiseTemplate">
        {{ helper.premise('{n}', '{value}', '{status}', '{message}') }}
    </script>
    <script type="text/template" id="predicateRowTemplate">
        {% call helper.predicate_row('{index}', '{subscript}', '{arity}') %}
            {symbol_html}
        {% endcall %}
    </script>
    {%- if errors %}
        {% include 'errors.jinja2' %}
    {%- endif %}
    {%- if warns %}
        {% include 'warns.jinja2' %}
    {%- endif %}
    <div id="proove-tabs-wrapper">
        <div id="proove-tabs" class="">
            {# NB: Changes to tab order must be updated in app js #}
            <ul>
                <li><a href="#tab-argument">Input</a></li>
                <li><a href="#tab-options" >Options</a></li>
                {% if is_proof %}
                    <li><a href="#tab-stats" >Stats</a></li>
                    {% if is_controls -%}
                        <li><a href="#tab-view">View</a></li>
                        <li><a href="#tab-step">Step</a></li>
                    {% endif %}
                    {% if is_models -%}
                        <li><a href="#tab-models" >Models</a></li>
                    {% endif %}
                {% endif %}
            </ul>
            <form id="tableau_input_form" class="argument" action="/" method="post">
                <input type="hidden" id="tableau_form_api_json" name="api-json"/>
                <div id="tab-argument" class="fieldset argument {{- ' hidden' if is_proof and selected_tab != 'argument'}}">
                    <div class="fieldset-contents">
                        <div class="left" id="argument-input-panel">
                            {% include 'v2/argument-input.jinja2' %}
                        </div>
                        <div id="lexicons-wrapper">
                            {% include 'v2/lexicon.jinja2' %}
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>  
                <div id="tab-options" class="fieldset options hidden">
                    <div class="fieldset-contents">
                        {% include 'v2/options.jinja2' %}
                    </div>
                </div>
            </form>
            {% if is_proof -%}
                <div id="tab-stats" class="{{ 'hidden' if selected_tab != 'stats' }}">
                    {% include 'v2/stats.jinja2' %}
                </div>
                {% if is_controls -%}
                    <div id="tab-view" class="{{ 'hidden' if selected_tab != 'view' }}">
                        {% include 'v2/view.jinja2' %}
                    </div>
                    <div id="tab-step" class="{{ 'hidden' if selected_tab != 'step' }}">
                        {% include 'v2/step.jinja2' %}
                    </div>
                {% endif %}
                {% if is_models -%}
                    <div id="tab-models" class="{{ 'hidden' if selected_tab != 'models' }}">
                        {% include 'v2/models.jinja2' %}
                    </div>
                {% endif %}
            {% endif %}
        </div>
        <div class="clear"></div>
    </div>
    {% if is_proof -%}
        {% if resp_data.writer.format == 'html' %}
            {{ resp_data.tableau.body }}
        {% else %}
            <div class="tableau-wrapper plaintext">
                <pre>{{ resp_data.tableau.body|e }}</pre>
            </div>
        {% endif %}
    {% endif %}
{%- endblock -%}