{% macro write_structure(structure, is_child = False) -%}
    <div class="html-writer structure">
        {% if is_child %}
            <div class="vertical-line"></div>
        {% endif %}
        {% for node in structure['nodes'] %}
            <div class="node {% if node.ticked %}ticked{% endif %}">
                <span class="node-props">
                    {% if 'sentence' in node.props %}
                        <span class="sentence">
                            {% if writer.symbol_set.name == 'html' %}
                                {{ writer.write(node.props['sentence']) }}
                            {% else %}
                                {{ writer.write(node.props['sentence'])|e }}
                            {% endif %}
                        </span>
                        {% if 'world' in node.props %}
                            <span class="world">, w<span class="subscript">{{ node.props['world'] }}</span></span>
                        {% endif %}
                    {% endif %}
                    {% if 'designated' in node.props %}
                        <span class="designation {% if not node.props['designated'] %}un{% endif %}designated">
                            {% if node.props['designated'] %} &oplus;{% else %} &ominus;{% endif %}
                        </span>
                    {% endif %}
                    {% if 'world1' in node.props and 'world2' in node.props %}
                        <span class="access">w<span class="subscript">{{ node.props['world1'] }}</span>Rw<span class="subscript">{{ node.props['world2'] }}</span></span>
                    {% endif %}
                </span>
            </div>
        {% endfor %}
        {% if structure['closed'] %}
            <div class="closeMark">&otimes;</div>
        {% endif %}
        {% if structure['children']|length %}
            <div class="vertical-line"></div>
            {% set width = 100 / (structure['children']|length) %}
            <div class="horizontal-line" style="width: {{ 100 - width }}%;"></div>
            {% for child in structure['children'] %}
                <div class="child-wrapper" style="width: {{ width }}%;">
                    {{ write_structure(child, is_child = True) }}
                </div>
            {% endfor %}
        {% endif %}
    </div>
{%- endmacro %}
{{ write_structure(tableau.tree) }}
<div style="clear: both"></div>